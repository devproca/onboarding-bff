<div class="flex items-center justify-center" *ngIf="!loadingSubscription.closed">
  <tw-spinner size="lg" spinnerStyle="style2"></tw-spinner>
</div>

<div class="m-10">
  <div class="flex">
    <div class="text-lg mb-4">User List</div>
    <button class="btn btn-blue ml-4" (click)="createUser()">Create User</button>
  </div>
  <div class="border rounded p-6">
    <div *ngIf="users.length; else noUsers">
      <table class="list-table">
        <thead>
        <tr>
          <th class="list-header">User Name</th>
          <th class="list-header">First Name</th>
          <th class="list-header">Last Name</th>
          <th class="list-header">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr class="list-row" *ngFor="let user of users">
          <td class="list-data">{{ user.username }}</td>
          <td class="list-data">{{ user.firstName }}</td>
          <td class="list-data">{{ user.lastName }}</td>

          <td class="list-data">
            <div class="flex items-center justify-center">
              <div class="actions">
                <tw-popper>
                  <img class="svgButton" src="../../assets/svg/id.svg">
                  <div class="popper flex">
                    <div class="font-bold">User ID:</div>
                    {{ user.userId }}
                  </div>
                </tw-popper>
              </div>

              <div class="actions">
                <img class="svgButton ml-1" (click)="openPhoneDialog(user)" src="../../assets/svg/phone.svg">
              </div>

              <div class="actions">
                <img class="svgButton ml-1" src="../../assets/svg/edit.svg" (click)="editUser(user)">
              </div>

              <div class="actions">
                <tw-popper #refDelete>
                  <img class="svgButton delete ml-1" src="../../assets/svg/trash.svg">
                  <div class="popper">
                    Are you sure you want to delete this user?
                    <div class="block">
                      <button class="btn btn-red" (click)="deleteUser(user)">Yes</button>
                      <button class="btn btn-blue ml-2" (click)="handleCancelDelete()">No</button>
                    </div>
                  </div>
                </tw-popper>
              </div>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <ng-template #noUsers>
      <div class="noUsers">There are no users yet.</div>
    </ng-template>
  </div>
</div>
