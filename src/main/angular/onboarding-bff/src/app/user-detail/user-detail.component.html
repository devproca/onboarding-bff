
<div class="container">

    <form [formGroup]="userDetailForm" (ngSubmit)="onSubmit()" >

      <input id="userId"
              type="hidden"
              formControlName="userId">

      <div class="row">

        <!-- Begin Form Left Side -->
        <div class="col-lg-4 col-md-4 col-sm-4 mt-lg-2 mt-md-4 mt-sm-2">

          <div class="form-group">
            <label for="firstname" >{{'USERDETAIL.FIRSTNAME' | translate }}</label>
            <input id="firstname"
                  placeholder="{{'USERDETAIL.FIRSTNAME' | translate }}"
                  class="form-control"
                  type="text"
                  formControlName="firstName">
            <small *ngIf="!userDetailForm.get('firstName').valid &&
                          userDetailForm.get('firstName').hasError('forbiddenFirstName')"
                  class="text-danger">{{'USERDETAIL.FIRSTNAMEBAD' | translate}}</small>
            <small *ngIf="!userDetailForm.get('firstName').valid &&
                          userDetailForm.get('firstName').hasError('required') &&
                          userDetailForm.get('firstName').touched"
              class="text-danger">{{'USERDETAIL.FIRSTNAMEREQ' | translate}}</small>
          </div>
          <div class="form-group">
            <label for="lastname">{{'USERDETAIL.LASTNAME' | translate }}</label>
            <input id="lastname"
                  placeholder="{{'USERDETAIL.LASTNAME' | translate }}"
                  class="form-control"
                  type="text"
                  formControlName="lastName">
            <small *ngIf="!userDetailForm.get('lastName').valid &&
                          userDetailForm.get('lastName').touched"
                  class="text-danger">{{'USERDETAIL.LASTNAMEREQ' | translate}}</small>
          </div>
          <div class="form-group">
            <label for="username">{{'USERDETAIL.USERNAME' | translate }}</label>
            <input id="username"
                  placeholder="{{'USERDETAIL.USERNAME' | translate }}"
                  class="form-control"
                  type="text"
                  [attr.readonly]="fixedUsername"
                  formControlName="username">
            <small *ngIf="!userDetailForm.get('username').valid &&
                          userDetailForm.get('username').hasError('forbiddenUserName')"
                  class="text-danger">{{'USERDETAIL.USERNAMEBAD' | translate}}</small>
            <small *ngIf="!userDetailForm.get('username').valid &&
                          userDetailForm.get('username').hasError('required') &&
                          userDetailForm.get('username').touched"
                  class="text-danger">{{'USERDETAIL.USERNAMEREQ' | translate}}</small>
          </div>

          <div class="btn-toolbar text-center">
            <button class="btn btn-danger"
                    type="button"
                    (click)="cancel()">{{'USERDETAIL.BTNCANCEL' | translate }}</button>
            <button class="btn btn-primary ml-2"
                    type="submit"
                    [disabled]="!userDetailForm.valid" >{{'USERDETAIL.BTNSAVE' | translate }}</button>
          </div>

        </div>
        <!-- End Form Left Side -->

        <!-- Begin Form Right Side -->
        <div class="col-lg-4 col-md-4 col-sm-4 mt-lg-2 mt-md-4 mt-sm-2">

            <div class="btn-toolbar text-center mb-2">
              <button class="btn btn-success" type="button" [disabled]="!userDetailForm.valid" (click)="showAddPhoneModal()" >{{'USERDETAIL.BTNADDPHONE' | translate}}</button>
            </div>

            <table class="table table-responsive dv-pro-tbl">
              <thead>
              <tr>
                <th>{{'USERDETAIL.PHONETYPE' | translate }}</th>
                <th>{{'USERDETAIL.PHONENUMBER' | translate }}</th>
                <th>{{'USERDETAIL.ACTION' | translate }}</th>
              </tr>
              </thead>
              <tbody>
              <tr formArrayName="phones"  *ngFor="let phone of userDetailForm.get('phones')['controls']; let idx = index">

                <td [formGroupName]="idx" class="dv-pro-hidden">
                  <input formControlName="userId">
                </td>

                <td [formGroupName]="idx" class="dv-pro-hidden">
                  <input formControlName="phoneId">
                </td>

                <td [formGroupName]="idx">
                  <input class="form-control" formControlName="kind" [id]="'kind'+idx" type="text" readonly >
                </td>
                <td [formGroupName]="idx">
                  <input class="form-control dv-pro-pad" formControlName="telNumber" [id]="'telNumber'+idx"  type="text" readonly>
                </td>

                <td>
                  <div>
                    <button class="btn btn-info rounded-pill" title="{{'USERDETAIL.EDITPHONE' | translate}}" type="button"
                            (click)="editPhone(idx)">
                      <i class="fa fa-pencil"></i>
                    </button>
                    <button class="ml-1 btn btn-danger rounded-pill"  title="{{'USERDETAIL.DELETEPHONE' | translate}}" type="button"
                            (click)="deletePhone(idx)">
                      <i class="fa fa-trash"></i>
                    </button>
                  </div>

                </td>
              </tr>
              </tbody>
            </table>


        </div>
        <!-- End Form Right Side -->

      </div>  <!-- row -->

    </form>

</div> <!-- container -->

<br>
Form Value:
<br>
{{userDetailForm.value | json}}
<br>
Form Status:
{{userDetailForm.status}}
<br>
Form Value Changes:
<br>
{{formValueChanges}}

<app-add-phone-modal *ngIf="showModal" [srcPhone]="phoneToEdit" (closeModal)="onHandleAddUserPhone($event)" ></app-add-phone-modal>


